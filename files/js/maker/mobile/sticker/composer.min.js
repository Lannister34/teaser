!function(){var n,t,e,i,o={loop:n=function(n){return{run:Array.isArray(n)?function(t){for(var e=0;e<n.length;e++)t(n[e],e,n)}:function(t){var e;for(e in n)n.hasOwnProperty(e)&&t(n[e],e,n)}}},assign:function(t,e){return n(t).run(function(n,t){e[t]=n}),e},pull:function(n,t){var e=new RegExp("[\\?&]"+n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)").exec(location.search);return e?decodeURIComponent(e[1].replace(/\+/g," ")).replace(/-/g,"/"):t}},r={prx:t={properties:new RegExp("text-size-adjust|user-select|transform|transition|box-shadow|animation|filter","i"),prefix:["","webkit","moz","ms","o","ie","wap","khtml"],set:function(n){var t=this.properties.source.split("|");t.push(n),t=t.toString().replace(/,/g,"|"),this.properties=new RegExp(t,this.properties.flags)}},fix:e=function(n,e,i){o.loop(t.prefix).run(function(t,o){var r=o?"-"+t+"-":"";n.style[r+e]=i[e]})},style:function(n,i){o.loop(i).run(function(o,r){r.match(t.properties)?e(n,r,i):n.style[r]=o})},rule:function(n,t){var e="sheet"in n?"insertRule"in n.sheet?["sheet","insertRule"]:"addRule"in n.sheet?["sheet","addRule"]:null:null;e&&!n.sheet.init_count&&(n.sheet.init_count=0),o.loop(t).run(function(t,o){!function(n,t,i,o){o=o||null,e?"addRule"===e[1]?n[e[0]][e[1]](t,i,o):n[e[0]][e[1]](t+"{"+i+"}",o):n.innerHTML+=t+"{"+i+"}",e&&n.sheet.init_count++}(n,o,i(t),n.sheet.init_count)})},animation:function(n,e){o.loop(e).run(function(e,r){var a,c="/* "+r+" */\n\n",s=(a="",o.loop(t.prefix).run(function(n,t){var c;a+="@"+(t?"-"+n+"-":"")+"keyframes "+r+" {\n"+(c="",o.loop(e).run(function(n,t){c+=t+"{"+i(n)+"}\n"}),c)+"}\n\n"}),a);n.innerHTML+=c+s})},media:function(n,t){o.loop(t).run(function(t,e){var r,a="@media "+e+" {\n"+(r="",o.loop(t).run(function(n,t){r+=t+"{"+i(n)+"}"}),r)+"\n}\n\n";n.innerHTML+=a})},properties:i=function(n){var e="";return o.loop(n).run(function(n,i){i.match(t.properties)?o.loop(t.prefix).run(function(t,o){e+=(o?"-"+t+"-":"")+i+":"+n+";"}):e+=i+":"+n+";"}),e}},a=!1,c=null;if(window.GLOBAL_CONFIG&&(c=window.GLOBAL_CONFIG)||(c=/global_config=([^\&]+)(\&|$)/.exec(document.location.search))&&(c=JSON.parse(decodeURIComponent(atob(c[1]))),a=!0),c){var s={fetch:function(n){n&&window.top.postMessage({hash:c.phash,cmnd:n},"*")},gain:function(){window.addEventListener("message",function(n){"object"==typeof n.data&&n.data.hash===c.phash&&n.data.cmnd.name in s.pull&&s.pull[n.data.cmnd.name](n.data.cmnd.data||null)})}};s.send={ready:s.fetch.bind(null,{name:"ready"}),hide:s.fetch.bind(null,{name:"hide"}),close:s.fetch.bind(null,{name:"close"}),target:s.fetch.bind(null,{name:"target"}),empty:s.fetch.bind(null,{name:"empty"}),bounce:s.fetch.bind(null,{name:"bounce",data:c.close_url||null})},s.pull={};var u,l,d,h,p,f,m,g,w,v,_=new function(){this.clickmap=c.click_map?c.click_map+(/\?/.test(c.click_map)?"&":"?"):null,this.targeted=0,this.internals=function(n){var t=b.size(),e=b.device().orientation.portrait;return this.clickmap+"c="+n.pageX+";"+n.pageY+"&co="+n.offsetX+";"+n.offsetY+"&fs="+t.in_width+";"+t.in_height+"&tc="+this.targeted+"&so="+(e?1:0)+"&it="+("isTrusted"in n?n.isTrusted?1:0:"-1")+"&"+Math.random()},this.request={list:[],make:function(n){var t=this.list.length;this.list.push(new Image),this.list[t]._complete_=!1,this.list[t].onload=this.list[t].onerror=function(){this._complete_=!0},this.list[t].src=n},complete:function(){for(var n=!0,t=this.list.length,e=0;e<t;e++)if(!this.list[e]._complete_){n=!1;break}return n}},this.show=function(){c.pixel&&this.request.make(c.pixel)},this.event=function(n){this.clickmap&&this.request.make(this.internals(n)),this.targeted&&(this.timer=setInterval(function(){this.request.complete()&&(clearInterval(this.timer),s.send.target())}.bind(this),50))},this.target=function(){this.targeted=1,c&&s.send.hide()}},b=(d=o.pull("promosize",.25),u=window.navigator.userAgent.toLowerCase(),h={android:(l=function(n){return u.match(n)})(/android/i),ios:l(/iphone|ipad|ipod/i),uc:l(/ucbrowser/i)},f=function(){var n=p(),t=n.in_width<n.in_height/d&&n.av_width<n.av_height||n.in_width>n.in_height/d&&n.av_width>n.av_height?n.in_width/n.av_width:n.in_width/n.av_height;return t>1?t:1},{agent:h,size:p=function(){return{in_width:Math.min(document.documentElement.clientWidth,window.innerWidth||0),in_height:Math.min(document.documentElement.clientHeight,window.innerHeight||0),av_width:screen.availWidth,av_height:screen.availHeight}},scale:f,device:function(){var n=p(),t=f(),e=n.in_width,i=n.in_height/d,o=e<i&&e<450*t&&i<850*t||e>i&&e<850*t&&i<450*t;return{orientation:{landscape:e>i,portrait:e<i},type:{mobile:o,tablet:!o}}},type:d}),k=(w=function(n){n in m||(m[n]={})},{list:m={},set:function(){o.loop(m).run(function(n,t){"on"+t in window?window["on"+t]=function(n){g(t,n)}:console.warn("there is no "+t+" event in window")})},run:g=function(n,t){t=t||null,n in m?o.loop(m[n]).run(function(n){n(t)}):console.warn("there is no "+n+" event in window")},add:{evt:w,func:function(n,t,e){n in m?t in m[n]?console.warn(n+" event already has "+t+" function"):m[n][t]=e:(w(n),m[n][t]=e)}},remove:{evt:function(n){n in m&&delete m[n]},func:function(n,t){n in m&&func in m[n]&&delete m[n][t]}}}),x=((v=document.createElement("a")).classList.add("main-box"),v.setAttribute("href",c.click_url),v.setAttribute("target","_blank"),b.agent.ios?(v.style.cursor="pointer",v.setAttribute("onclick","void(0)"),v.addEventListener("click",function(n){_.target()})):v.onclick=_.target.bind(_),document.body.onclick=_.event.bind(_),v),y={data:o,css:r,cmnd:s,tracker:_,config:c,embeded:a,page:b,events:k,box:x},L=document.createElement("script");L.src="/files/js/constructor/mobile/sticker/"+data_config.options.template+"/set-up.js?"+Math.random(),L.onload=function(){promo_set_up(y,data_config.data)},document.head.appendChild(L)}}();
